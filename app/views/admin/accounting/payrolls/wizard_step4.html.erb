<div class="p-6">
  <h1 class="text-2xl font-bold text-gray-900 mb-2">給与計算完了</h1>
  <p class="text-sm text-gray-500 mb-6">期間: <%= @completion_summary[:period] %> の給与計算処理が完了しました</p>

  <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
    <div class="flex items-center mb-4">
      <svg class="w-8 h-8 text-green-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <h2 class="text-xl font-bold text-green-900">処理完了</h2>
    </div>
    <div class="grid grid-cols-3 gap-4 text-sm">
      <div>
        <div class="text-green-700 font-medium">給与計算</div>
        <div class="text-green-600"><%= @completion_summary[:calculation_completed_at] %></div>
      </div>
      <div>
        <div class="text-green-700 font-medium">明細発行</div>
        <div class="text-green-600"><%= @completion_summary[:slips_generated_at] %></div>
      </div>
      <div>
        <div class="text-green-700 font-medium">給与振込</div>
        <div class="text-green-600"><%= @completion_summary[:transfer_completed_at] %></div>
      </div>
    </div>
  </div>

  <div class="bg-white rounded-lg shadow p-6 mb-6">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">処理結果サマリー</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div>
        <div class="text-xs text-gray-500 mb-1">総スタッフ数</div>
        <div class="text-2xl font-bold text-gray-900"><%= @completion_summary[:total_staff] %>名</div>
      </div>
      <div>
        <div class="text-xs text-gray-500 mb-1">稼働スタッフ</div>
        <div class="text-2xl font-bold text-green-600"><%= @completion_summary[:working_staff] %>名</div>
      </div>
      <div>
        <div class="text-xs text-gray-500 mb-1">非稼働スタッフ</div>
        <div class="text-2xl font-bold text-gray-400"><%= @completion_summary[:non_working_staff] %>名</div>
      </div>
      <div>
        <div class="text-xs text-gray-500 mb-1">総稼働時間</div>
        <div class="text-2xl font-bold text-blue-600"><%= @completion_summary[:total_work_hours] %>h</div>
      </div>
      <div>
        <div class="text-xs text-gray-500 mb-1">総支給額</div>
        <div class="text-xl font-bold text-gray-900">¥<%= number_with_delimiter(@completion_summary[:total_gross_pay]) %></div>
      </div>
      <div>
        <div class="text-xs text-gray-500 mb-1">総控除額</div>
        <div class="text-xl font-bold text-red-600">¥<%= number_with_delimiter(@completion_summary[:total_deductions]) %></div>
      </div>
      <div class="col-span-2">
        <div class="text-xs text-gray-500 mb-1">差引支給額</div>
        <div class="text-2xl font-bold text-green-600">¥<%= number_with_delimiter(@completion_summary[:total_net_pay]) %></div>
      </div>
    </div>
  </div>

  <% if @issues.any? %>
    <div class="bg-white rounded-lg shadow p-6 mb-6">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">エラー・警告</h2>
      <div class="space-y-2">
        <% @issues.each do |issue| %>
          <div class="flex items-start p-3 rounded-lg <%= issue[:severity] == 'warning' ? 'bg-yellow-50' : 'bg-blue-50' %>">
            <span class="text-sm font-medium <%= issue[:severity] == 'warning' ? 'text-yellow-800' : 'text-blue-800' %> mr-2"><%= issue[:type] %>:</span>
            <span class="text-sm <%= issue[:severity] == 'warning' ? 'text-yellow-700' : 'text-blue-700' %>"><%= issue[:message] %></span>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>

  <div class="flex justify-end">
    <%= link_to "給与管理に戻る", admin_accounting_payrolls_path, class: "px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700" %>
  </div>
</div>
